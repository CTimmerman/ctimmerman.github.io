<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Unicode Chart by Cees Timmerman</title>
	<link rel="icon"
	href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 112 100%22><text y=%22.9em%22 font-size=%2290%22>üåç</text></svg>">
	<style>
		body, a {
			background-color: black;
			color: white;
			font-family: monospace;
			font-size: 5mm;
			margin: 0;
			text-align: center;
		}
		.selected {
			color: yellow;
		}
	</style>
</head>
<body onload="run()" onhashchange="run()">
	Unicode  15 has <a href="https://en.wikipedia.org/wiki/List_of_Unicode_characters">149,186</a> characters.
	<input type="checkbox" id="labels" checked onchange="toggle_labels()"><label for="labels">Labels</label><br><br>
	<div id="chart"></div>
	<script>
		'use strict'
		const MAX = 149186

		function arg(name){
			const re = new RegExp(name + '=(.*)&?')
			const m = document.location.search.match(re) || document.location.hash.match(re)
			if(m) return parseFloat(decodeURIComponent(m[1]))
		}

		function toggle_labels(){
			document.querySelectorAll('span>label').forEach(e=>e.style.display=labels.checked?'inline':'none')
		}

		function run(){
			const base = arg('base') || 10
			const from = arg('from') || 0
			const amount = arg('amount') || 1000

			let html = ''
			const prev = Math.max(from - amount, 0)
			const next = Math.min(from + amount, 150000)
			if(from > 0) html += `<a href="#base=${base}&from=${prev}&amount=${amount}">&lt; Prev</a>`
			if(from < MAX) html += ` <a href="#base=${base}&from=${next}&amount=${amount}">Next &gt;</a>`
			html += '<br><br>'
			for(var i = from; i <= from + amount - 1; ++i){
				let c = String.fromCodePoint(i)
				html += ` <span dir=ltr><label style="display:${labels.checked?'inline':'none'}">${i.toString(base)}&nbsp;</label>${c}</span>`
			}
			chart.innerHTML = html
			document.body.oncontextmenu = (e)=>{
				const n = e.target.nodeName === 'LABEL' ? e.target.parentNode : e.target
				if(n.nodeName === 'SPAN'){
					const s = n.innerText
					let [cp, c] = s.split(/\s/)
					if(!c) c = cp
					cp = c.codePointAt(0)
					const msg = `&#${cp}; \\u{${cp.toString(16)}} ${c}`
					console.log(msg)
					alert(msg)
				}
				if(e.target.nodeName !== 'A') e.preventDefault()
			}
		}

		window.onclick = (e)=>{
			if(e.target.nodeName === 'SPAN') e.target.classList.toggle('selected')
			else if(e.target.parentNode.nodeName === 'SPAN') e.target.parentNode.classList.toggle('selected')
		}
	</script>
</body>
</html>
